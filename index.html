<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>UpDownCard | Memorize Everything by Swiping Up & Down</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Crimson+Pro:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: 'Crimson Pro', Georgia, serif;
      background: #0a0a0b;
      overflow: hidden;
      touch-action: none;
    }
    
    .display-font {
      font-family: 'Space Grotesk', sans-serif;
    }
    
    .bg-lime-brand { background-color: #B9FF66; }
    .text-lime-brand { color: #B9FF66; }
    .border-lime-brand { border-color: #B9FF66; }
    
    .card-container {
      perspective: 1200px;
    }
    
    .swipe-card {
      transform-style: preserve-3d;
      will-change: transform, opacity;
    }
    
    .card-shadow {
      box-shadow: 
        0 8px 0 0 rgba(185, 255, 102, 0.15),
        0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    
    .card-inner {
      background: linear-gradient(145deg, #1a1a1d 0%, #111113 100%);
      border: 1px solid rgba(185, 255, 102, 0.2);
      scrollbar-width: thin;
      scrollbar-color: rgba(185, 255, 102, 0.3) transparent;
    }
    
    .card-inner::-webkit-scrollbar {
      width: 4px;
    }
    
    .card-inner::-webkit-scrollbar-track {
      background: transparent;
    }
    
    .card-inner::-webkit-scrollbar-thumb {
      background: rgba(185, 255, 102, 0.3);
      border-radius: 2px;
    }
    
    .type-badge {
      background: linear-gradient(135deg, #B9FF66 0%, #9ae550 100%);
      box-shadow: 0 2px 8px rgba(185, 255, 102, 0.3);
    }
    
    .translation-area {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .translation-area.expanded {
      max-height: 500px;
    }
    
    .progress-ring {
      transform: rotate(-90deg);
    }
    
    
    .grain-overlay {
      position: fixed;
      inset: 0;
      pointer-events: none;
      opacity: 0.03;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    }
    
    .card-content {
      font-size: 1.1rem;
      line-height: 1.7;
      letter-spacing: 0.01em;
    }
    
    @media (max-width: 640px) {
      .card-content {
        font-size: 1rem;
        line-height: 1.6;
      }
    }
    
    .about-modal-content {
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    
    .blur-content {
      transition: filter 0.4s ease-out;
    }
    
    .blur-content.blurred {
      filter: blur(8px);
      user-select: none;
    }
    
    </style>
</head>
<body class="min-h-screen text-white antialiased selection:bg-[#B9FF66] selection:text-black">
  <!-- Background Effects -->
  <div class="grain-overlay"></div>
  
  <!-- Header -->
  <header class="fixed top-0 left-0 right-0 z-50 px-6 py-5">
    <div class="max-w-2xl mx-auto flex flex-col items-center gap-2">
      <!-- Title -->
      <div class="flex items-center gap-2">
        <div class="relative w-3 h-4" style="transform: rotate(10deg);">
          <div class="w-full h-full rounded-sm" style="background-color: #B9FF66;"></div>
        </div>
        <span class="text-lg font-semibold tracking-tight display-font text-white">
          UpDownCard
        </span>
      </div>
      <!-- Why I built this link -->
      <button id="aboutLink" class="text-sm text-zinc-500 hover:text-lime-brand transition-colors display-font">
        Why I built this?
      </button>
    </div>
  </header>

  <!-- Main Card Area -->
  <main class="min-h-screen flex items-center justify-center px-4 pt-20 pb-16">
    <div class="card-container w-full max-w-2xl">
      <div id="swipeCard" class="swipe-card">
        <!-- Progress Indicator -->
        <div class="flex items-center justify-center gap-2 mb-2.5">
          <svg class="progress-ring w-5 h-5" viewBox="0 0 36 36">
            <circle cx="18" cy="18" r="14" fill="none" stroke="#27272a" stroke-width="4"/>
            <circle id="progressCircle" cx="18" cy="18" r="14" fill="none" stroke="#B9FF66" stroke-width="4" 
                    stroke-dasharray="88" stroke-dashoffset="70.4" stroke-linecap="round"/>
          </svg>
          <span class="text-sm text-zinc-500 display-font whitespace-nowrap">
            <span id="currentIndex">1</span>/<span id="totalCards">5</span>
          </span>
        </div>
        <div id="cardInner" class="card-inner rounded-[32px] p-6 sm:p-8 card-shadow">
          <!-- Word -->
          <div class="mb-2">
            <h2 id="wordText" class="text-2xl sm:text-3xl font-bold text-white display-font">
              abstraction
            </h2>
          </div>
          
          <!-- Blurred content area -->
          <div id="blurredContent" class="blur-content blurred">
            <!-- Phonetic · POS · Meaning -->
            <div id="metaArea" class="mb-4">
              <p class="text-zinc-400 display-font text-sm">
                <span id="phoneticText">/æbˈstrækʃən/</span>
                <span class="text-zinc-600 mx-2">·</span>
                <span id="posText">n.</span>
                <span class="text-zinc-600 mx-2">·</span>
                <span id="meaningText" class="text-lime-brand">抽象</span>
              </p>
            </div>
            
            <!-- Sentence with Type -->
            <div class="mb-4">
              <p class="card-content text-zinc-100">
                <span id="sentenceText">And so the idea of a part system is that there's an abstraction above agile and design thinking that we have to pay attention to build solid organizations and to execute well at the product and the business layer.</span>
                <span id="typeBadge" class="text-zinc-500 text-sm display-font ml-2">#leadership</span>
              </p>
            </div>
          </div>
          
          <!-- Instructions (only shown on first card) -->
          <div id="instructionsArea" class="mt-6 pt-6 border-t border-zinc-800/50">
            <div class="flex flex-col gap-3 text-sm text-zinc-500">
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-zinc-800 flex items-center justify-center flex-shrink-0">
                  <i data-lucide="chevron-up" class="w-4 h-4 text-lime-brand"></i>
                </div>
                <span>Swipe up for next card</span>
              </div>
              <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-zinc-800 flex items-center justify-center flex-shrink-0">
                  <i data-lucide="chevron-down" class="w-4 h-4 text-lime-brand"></i>
                </div>
                <span>Swipe down to reveal</span>
              </div>
            </div>
          </div>
          
          <!-- Hidden translation area (kept for compatibility) -->
          <div id="translationArea" class="hidden">
            <p id="translationText"></p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer with Share Button -->
  <footer class="fixed bottom-0 left-0 right-0 z-50 px-6 py-4">
    <div class="max-w-2xl mx-auto flex justify-center">
      <button id="shareBtn" class="flex items-center gap-2 text-sm text-zinc-500 hover:text-lime-brand transition-colors display-font">
        <i data-lucide="share" class="w-4 h-4"></i>
        <span>Share</span>
      </button>
    </div>
  </footer>

  <!-- About Modal -->
  <div id="aboutModal" class="fixed inset-0 z-[100] hidden">
    <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" id="modalOverlay"></div>
    <div class="relative min-h-screen flex items-center justify-center p-6">
      <div class="about-modal-content bg-[#111113] border border-zinc-800 rounded-[24px] max-w-xl w-full p-8 sm:p-10 relative">
        <!-- Close button -->
        <button id="closeModal" class="absolute top-4 right-4 w-10 h-10 rounded-full bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center transition-colors">
          <i data-lucide="x" class="w-5 h-5 text-zinc-400"></i>
        </button>
        
        <!-- Content -->
        <div class="space-y-6">
          <h2 class="text-2xl font-semibold display-font text-white">Why I built this?</h2>
          
          <p class="text-zinc-300 leading-relaxed">
            All sentences are sourced from podcast transcripts generously made public by <a href="https://x.com/lennysan" target="_blank" rel="noopener noreferrer" class="text-lime-brand hover:underline">Lenny</a>.
          </p>
          
          <p class="text-zinc-300 leading-relaxed">
            "Why not learn authentic English expressions while mastering top-tier product thinking at the same time?" That is why I built this website.
          </p>
          
          <p class="text-zinc-300 leading-relaxed">
            Swipe up for the next card, and swipe down to reveal hidden content. It's like flashcards, but more TikTok-y.
          </p>
          
          <div class="pt-4 border-t border-zinc-800">
            <a href="https://x.com/imvanessali" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 text-lime-brand hover:underline display-font">
              Built by @imvanessali
              <i data-lucide="external-link" class="w-4 h-4"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    lucide.createIcons();
    
    // Card Data - will be loaded from JSON
    let cards = [];
    
    // State
    let currentIndex = 0;
    let translationShown = false;
    let startY = 0;
    let currentY = 0;
    let isDragging = false;
    
    // DOM Elements
    const swipeCard = document.getElementById('swipeCard');
    const cardInner = document.getElementById('cardInner');
    const wordText = document.getElementById('wordText');
    const phoneticText = document.getElementById('phoneticText');
    const posText = document.getElementById('posText');
    const meaningText = document.getElementById('meaningText');
    const sentenceText = document.getElementById('sentenceText');
    const typeBadge = document.getElementById('typeBadge');
    const translationArea = document.getElementById('translationArea');
    const translationText = document.getElementById('translationText');
    const currentIndexEl = document.getElementById('currentIndex');
    const totalCardsEl = document.getElementById('totalCards');
    const progressCircle = document.getElementById('progressCircle');
    const instructionsArea = document.getElementById('instructionsArea');
    const blurredContent = document.getElementById('blurredContent');
    
    // Load vocabulary data from JSON
    fetch('vocabulary_learning.json')
      .then(response => response.json())
      .then(data => {
        // Shuffle and take first 50 cards for variety
        cards = data.sort(() => Math.random() - 0.5).slice(0, 50);
        totalCardsEl.textContent = cards.length;
        updateCard();
        updateProgress();
      })
      .catch(error => {
        console.error('Error loading vocabulary:', error);
      });
    
    // Touch Events only (no mouse/click support)
    swipeCard.addEventListener('touchstart', handleStart, { passive: true });
    swipeCard.addEventListener('touchmove', handleMove, { passive: true });
    swipeCard.addEventListener('touchend', handleEnd);
    
    // Keyboard support
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp') {
        goToNextCard();
      } else if (e.key === 'ArrowDown') {
        toggleTranslation();
      }
    });
    
    function handleStart(e) {
      isDragging = true;
      startY = e.touches[0].clientY;
      currentY = startY;
      swipeCard.style.transition = 'none';
    }
    
    function handleMove(e) {
      if (!isDragging) return;
      
      currentY = e.touches[0].clientY;
      const deltaY = currentY - startY;
      
      // Limit drag distance and apply transform directly
      const limitedDelta = Math.max(-120, Math.min(120, deltaY));
      const opacity = deltaY < 0 ? Math.max(0, 1 - Math.abs(deltaY) / 100) : 1;
      
      swipeCard.style.transform = `translate3d(0, ${limitedDelta}px, 0)`;
      swipeCard.style.opacity = opacity;
    }
    
    function handleEnd() {
      if (!isDragging) return;
      isDragging = false;
      
      const deltaY = currentY - startY;
      
      swipeCard.style.transition = 'transform 0.25s ease-out, opacity 0.25s ease-out';
      swipeCard.style.transform = 'translate3d(0, 0, 0)';
      swipeCard.style.opacity = 1;
      
      // Determine action based on swipe distance
      if (deltaY < -40) {
        // Swipe up - next card
        goToNextCard();
      } else if (deltaY > 40 && !translationShown) {
        // Swipe down - reveal content
        toggleTranslation();
      }
    }
    
    function goToNextCard() {
      if (currentIndex >= cards.length - 1) {
        // Last card - loop back or show completion
        animateCardExit('up', () => {
          currentIndex = 0;
          translationShown = false;
          updateCard();
          animateCardEnter();
        });
        return;
      }
      
      animateCardExit('up', () => {
        currentIndex++;
        translationShown = false;
        updateCard();
        animateCardEnter();
      });
    }
    
    function toggleTranslation() {
      if (translationShown) return;
      
      translationShown = true;
      
      // Remove blur to reveal content
      blurredContent.classList.remove('blurred');
      
      // Hide instructions when revealing
      if (currentIndex === 0 && instructionsArea) {
        instructionsArea.style.display = 'none';
      }
    }
    
    function updateCard() {
      if (cards.length === 0) return;
      
      const card = cards[currentIndex];
      
      // Update card content
      wordText.textContent = card.word;
      phoneticText.textContent = card.phonetic;
      posText.textContent = card.pos;
      meaningText.textContent = card.meaning;
      sentenceText.textContent = card.sentence;
      typeBadge.textContent = '#' + card.type;
      
      // Reset blur - content should be blurred for new card
      blurredContent.classList.add('blurred');
      
      // Reset scroll position
      cardInner.scrollTop = 0;
      
      // Show instructions only on first card
      if (instructionsArea) {
        instructionsArea.style.display = currentIndex === 0 ? 'block' : 'none';
      }
      
      // Update progress
      updateProgress();
    }
    
    function updateProgress() {
      currentIndexEl.textContent = currentIndex + 1;
      
      const progress = ((currentIndex + 1) / cards.length);
      const circumference = 88; // 2 * PI * 14
      const offset = circumference * (1 - progress);
      
      gsap.to(progressCircle, {
        strokeDashoffset: offset,
        duration: 0.25,
        ease: 'power2.out'
      });
    }
    
    function animateCardExit(direction, callback) {
      const yOffset = direction === 'up' ? -100 : 100;
      
      gsap.to(swipeCard, {
        y: yOffset,
        opacity: 0,
        duration: 0.2,
        ease: 'power2.in',
        onComplete: callback
      });
    }
    
    function animateCardEnter() {
      gsap.fromTo(swipeCard, 
        { y: 60, opacity: 0 },
        { y: 0, opacity: 1, duration: 0.25, ease: 'power2.out' }
      );
    }
    
    // Initial animation
    gsap.from(swipeCard, {
      y: 50,
      opacity: 0,
      duration: 0.8,
      ease: 'power3.out',
      delay: 0.2
    });
    
    // About Modal
    const aboutLink = document.getElementById('aboutLink');
    const aboutModal = document.getElementById('aboutModal');
    const closeModal = document.getElementById('closeModal');
    const modalOverlay = document.getElementById('modalOverlay');
    
    function openAboutModal() {
      aboutModal.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
      lucide.createIcons();
      
      gsap.fromTo(aboutModal.querySelector('.about-modal-content'),
        { opacity: 0, y: 30, scale: 0.95 },
        { opacity: 1, y: 0, scale: 1, duration: 0.4, ease: 'power3.out' }
      );
    }
    
    function closeAboutModal() {
      gsap.to(aboutModal.querySelector('.about-modal-content'), {
        opacity: 0,
        y: 20,
        scale: 0.95,
        duration: 0.25,
        ease: 'power2.in',
        onComplete: () => {
          aboutModal.classList.add('hidden');
          document.body.style.overflow = 'hidden';
        }
      });
    }
    
    aboutLink.addEventListener('click', openAboutModal);
    closeModal.addEventListener('click', closeAboutModal);
    modalOverlay.addEventListener('click', closeAboutModal);
    
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !aboutModal.classList.contains('hidden')) {
        closeAboutModal();
      }
    });
    
    // Share functionality
    const shareBtn = document.getElementById('shareBtn');
    const shareTextEl = shareBtn.querySelector('span');
    
    async function handleShare() {
      const shareData = {
        title: 'UpDownCard',
        text: 'Memorize Everything by Swiping Up & Down - Learn English vocabulary from Lenny\'s podcast!',
        url: window.location.href
      };
      
      // Try native share first
      if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {
        try {
          await navigator.share(shareData);
          return;
        } catch (err) {
          if (err.name !== 'AbortError') {
            console.log('Share failed:', err);
          }
        }
      }
      
      // Fallback: copy link to clipboard
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(window.location.href);
        } else {
          // Old fallback for older browsers
          const textArea = document.createElement('textarea');
          textArea.value = window.location.href;
          textArea.style.position = 'fixed';
          textArea.style.opacity = '0';
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          document.body.removeChild(textArea);
        }
        shareTextEl.textContent = 'Link copied!';
        setTimeout(() => {
          shareTextEl.textContent = 'Share';
        }, 2000);
      } catch (err) {
        console.log('Copy failed:', err);
        shareTextEl.textContent = 'Failed';
        setTimeout(() => {
          shareTextEl.textContent = 'Share';
        }, 2000);
      }
    }
    
    shareBtn.addEventListener('click', handleShare);
    shareBtn.addEventListener('touchend', (e) => {
      e.preventDefault();
      handleShare();
    });
  </script>
</body>
</html>

